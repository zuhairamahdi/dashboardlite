<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .sidebar-item {
            transition: all 0.2s;
        }
        .sidebar-item:hover {
            background: #f3f4f6;
        }
        .dark .sidebar-item:hover {
            background: #374151;
        }
        .mobile-sidebar {
            transition: transform 0.3s ease-in-out;
        }
        @media (max-width: 1023px) {
            .mobile-sidebar {
                transform: translateX(-100%);
            }
            .mobile-sidebar.open {
                transform: translateX(0);
            }
        }
        .backdrop-fade {
            transition: opacity 0.3s ease-in-out;
        }
        .backdrop-fade.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out, margin 0.3s ease-out;
            opacity: 0;
        }
        .submenu.open {
            max-height: 500px;
            opacity: 1;
            margin-top: 0.5rem;
        }
        
        /* DataTables Dark Mode Styling */
        .dark .dataTables_wrapper {
            color: #e5e7eb;
        }
        .dark .dataTables_wrapper .dataTables_filter input,
        .dark .dataTables_wrapper .dataTables_length select {
            background-color: #374151;
            color: #e5e7eb;
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
            padding: 0.5rem;
        }
        .dark .dataTables_wrapper .dataTables_paginate .paginate_button {
            color: #e5e7eb !important;
        }
        .dark .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            background: #374151 !important;
            border-color: #4b5563 !important;
            color: #fff !important;
        }
        .dark .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            background: #3b82f6 !important;
            border-color: #3b82f6 !important;
            color: #fff !important;
        }
        .dark table.dataTable thead th {
            color: #e5e7eb;
            border-bottom-color: #4b5563;
        }
        .dark table.dataTable tbody tr {
            background-color: transparent;
        }
        .dark table.dataTable tbody tr:hover {
            background-color: #374151 !important;
        }
        .dark table.dataTable tbody td {
            border-color: #4b5563;
        }
        
        /* Custom table styling */
        table.dataTable {
            border-collapse: separate !important;
            border-spacing: 0 0.5rem !important;
        }
        table.dataTable thead th {
            background: transparent !important;
            border: none !important;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            padding: 1rem !important;
        }
        table.dataTable tbody tr {
            background-color: white;
            border-radius: 0.5rem;
        }
        .dark table.dataTable tbody tr {
            background-color: #1f2937;
        }
        table.dataTable tbody td {
            border: none !important;
            padding: 1rem !important;
        }
        table.dataTable tbody tr td:first-child {
            border-top-left-radius: 0.5rem;
            border-bottom-left-radius: 0.5rem;
        }
        table.dataTable tbody tr td:last-child {
            border-top-right-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }
        .dataTables_wrapper .dataTables_length,
        .dataTables_wrapper .dataTables_filter,
        .dataTables_wrapper .dataTables_info,
        .dataTables_wrapper .dataTables_paginate {
            padding: 1rem;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-active {
            background-color: #dcfce7;
            color: #166534;
        }
        .dark .status-active {
            background-color: #14532d;
            color: #86efac;
        }
        .status-inactive {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .dark .status-inactive {
            background-color: #7f1d1d;
            color: #fca5a5;
        }
        .status-offline {
            background-color: #f3f4f6;
            color: #4b5563;
        }
        .dark .status-offline {
            background-color: #374151;
            color: #9ca3af;
        }
    </style>
    <script>
        // Dark mode initialization
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-200">
    <!-- Mobile Sidebar Backdrop -->
    <div id="sidebarBackdrop" class="backdrop-fade fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden" onclick="toggleMobileSidebar()"></div>
    
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar Container -->
        <div id="sidebarContainer" class="h-full"></div>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <!-- Header Container -->
            <div id="topbarContainer"></div>

            <!-- Products Content -->
            <div class="p-6 lg:p-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Products</h1>
                    <p class="text-gray-500 dark:text-gray-400 mt-2">Manage your product inventory</p>
                </div>

                <!-- Regular Table Section -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-6 transition-colors duration-200">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Quick Overview</h2>
                        <button class="px-4 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-lg text-sm font-medium hover:opacity-90 transition">
                            <i class="fas fa-plus mr-2"></i>Add Product
                        </button>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700">
                                    <th class="pb-3 px-4">Product</th>
                                    <th class="pb-3 px-4">Category</th>
                                    <th class="pb-3 px-4">Price</th>
                                    <th class="pb-3 px-4">Stock</th>
                                    <th class="pb-3 px-4">Status</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm">
                                <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                                <i class="fas fa-laptop text-blue-600 dark:text-blue-300"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-gray-100">MacBook Pro 16"</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">SKU: MBP-001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">Electronics</td>
                                    <td class="py-4 px-4 font-semibold text-gray-900 dark:text-gray-100">$2,399</td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">45 units</td>
                                    <td class="py-4 px-4">
                                        <span class="status-badge status-active">Active</span>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center">
                                                <i class="fas fa-headphones text-purple-600 dark:text-purple-300"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-gray-100">AirPods Pro</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">SKU: APP-002</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">Audio</td>
                                    <td class="py-4 px-4 font-semibold text-gray-900 dark:text-gray-100">$249</td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">128 units</td>
                                    <td class="py-4 px-4">
                                        <span class="status-badge status-active">Active</span>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                                <i class="fas fa-mobile-alt text-green-600 dark:text-green-300"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-gray-100">iPhone 15 Pro</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">SKU: IP15-003</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">Mobile</td>
                                    <td class="py-4 px-4 font-semibold text-gray-900 dark:text-gray-100">$999</td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">89 units</td>
                                    <td class="py-4 px-4">
                                        <span class="status-badge status-active">Active</span>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900 flex items-center justify-center">
                                                <i class="fas fa-watch text-orange-600 dark:text-orange-300"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900 dark:text-gray-100">Apple Watch Ultra</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">SKU: AWU-004</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4 text-gray-600 dark:text-gray-300">Wearables</td>
                                    <td class="py-4 px-4 font-semibold text-gray-900 dark:text-gray-100">$799</td>
                                    <td class="py-4 px-4 text-red-600 dark:text-red-400">3 units</td>
                                    <td class="py-4 px-4">
                                        <span class="status-badge status-inactive">Low Stock</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- DataTables Section -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 transition-colors duration-200">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">All Products</h2>
                        <div class="flex gap-2">
                            <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <i class="fas fa-filter mr-2"></i>Filter
                            </button>
                            <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table id="productsTable" class="display w-full">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Product</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Sales</th>
                                    <th>Revenue</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be populated by DataTables -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- jQuery (required for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <!-- Components JS -->
    <script src="js/components.js"></script>
    
    <script>
        // Load components first
        document.addEventListener('DOMContentLoaded', function() {
            loadAllComponents();
        });

        // Initialize DataTable after page loads
        $(document).ready(function() {
            // Sample product data
            const productsData = [
                [1, 'MacBook Pro 16"', 'Electronics', '$2,399', 45, 234, '$561,366', 'Active', ''],
                [2, 'AirPods Pro', 'Audio', '$249', 128, 567, '$141,183', 'Active', ''],
                [3, 'iPhone 15 Pro', 'Mobile', '$999', 89, 445, '$444,555', 'Active', ''],
                [4, 'Apple Watch Ultra', 'Wearables', '$799', 3, 89, '$71,111', 'Low Stock', ''],
                [5, 'iPad Air', 'Tablets', '$599', 67, 234, '$140,166', 'Active', ''],
                [6, 'Magic Keyboard', 'Accessories', '$349', 145, 123, '$42,927', 'Active', ''],
                [7, 'HomePod Mini', 'Audio', '$99', 234, 456, '$45,144', 'Active', ''],
                [8, 'AirTag 4-Pack', 'Accessories', '$99', 567, 789, '$78,111', 'Active', ''],
                [9, 'Studio Display', 'Displays', '$1,599', 12, 45, '$71,955', 'Active', ''],
                [10, 'Mac Mini M2', 'Computers', '$599', 34, 123, '$73,677', 'Active', ''],
                [11, 'Apple TV 4K', 'Entertainment', '$179', 89, 234, '$41,886', 'Active', ''],
                [12, 'MagSafe Battery', 'Accessories', '$99', 0, 12, '$1,188', 'Out of Stock', ''],
                [13, 'Beats Studio Pro', 'Audio', '$349', 156, 234, '$81,666', 'Active', ''],
                [14, 'Apple Pencil 2', 'Accessories', '$129', 234, 456, '$58,824', 'Active', ''],
                [15, 'iPhone 14', 'Mobile', '$699', 234, 789, '$551,511', 'Active', ''],
                [16, 'iMac 24"', 'Computers', '$1,299', 23, 67, '$87,033', 'Active', ''],
                [17, 'Magic Mouse', 'Accessories', '$79', 345, 234, '$18,486', 'Active', ''],
                [18, 'AirPods Max', 'Audio', '$549', 45, 123, '$67,527', 'Active', ''],
                [19, 'Mac Pro', 'Computers', '$6,999', 5, 12, '$83,988', 'Active', ''],
                [20, 'Pro Display XDR', 'Displays', '$4,999', 8, 23, '$114,977', 'Active', ''],
            ];

            const table = $('#productsTable').DataTable({
                data: productsData,
                pageLength: 10,
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
                order: [[0, 'asc']],
                columnDefs: [
                    {
                        targets: 1,
                        render: function(data, type, row) {
                            const icons = {
                                'MacBook Pro 16"': 'fa-laptop',
                                'AirPods Pro': 'fa-headphones',
                                'iPhone 15 Pro': 'fa-mobile-alt',
                                'Apple Watch Ultra': 'fa-watch',
                                'iPad Air': 'fa-tablet-alt',
                                'Magic Keyboard': 'fa-keyboard',
                                'HomePod Mini': 'fa-volume-up',
                                'AirTag 4-Pack': 'fa-dot-circle',
                                'Studio Display': 'fa-desktop',
                                'Mac Mini M2': 'fa-server',
                                'Apple TV 4K': 'fa-tv',
                                'MagSafe Battery': 'fa-battery-three-quarters',
                                'Beats Studio Pro': 'fa-headphones-alt',
                                'Apple Pencil 2': 'fa-pencil-alt',
                                'iPhone 14': 'fa-mobile',
                                'iMac 24"': 'fa-desktop',
                                'Magic Mouse': 'fa-mouse',
                                'AirPods Max': 'fa-headphones',
                                'Mac Pro': 'fa-server',
                                'Pro Display XDR': 'fa-tv'
                            };
                            const icon = icons[data] || 'fa-box';
                            return `
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center">
                                        <i class="fas ${icon} text-gray-600 dark:text-gray-400"></i>
                                    </div>
                                    <span class="font-medium">${data}</span>
                                </div>
                            `;
                        }
                    },
                    {
                        targets: 7,
                        render: function(data, type, row) {
                            const statusClasses = {
                                'Active': 'status-active',
                                'Low Stock': 'status-inactive',
                                'Out of Stock': 'status-offline'
                            };
                            const statusClass = statusClasses[data] || 'status-active';
                            return `<span class="status-badge ${statusClass}">${data}</span>`;
                        }
                    },
                    {
                        targets: 8,
                        orderable: false,
                        render: function(data, type, row) {
                            return `
                                <div class="flex gap-2">
                                    <button class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300" title="View">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300" title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                        }
                    }
                ],
                language: {
                    search: "Search products:",
                    lengthMenu: "Show _MENU_ products per page",
                    info: "Showing _START_ to _END_ of _TOTAL_ products",
                    infoEmpty: "No products available",
                    infoFiltered: "(filtered from _MAX_ total products)",
                    zeroRecords: "No matching products found",
                    paginate: {
                        first: "First",
                        last: "Last",
                        next: "Next",
                        previous: "Previous"
                    }
                }
            });
        });
    </script>
</body>
</html>
